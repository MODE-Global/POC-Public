name: Database Sync - biweekly
on:
  workflow_dispatch: # adding the workflow_dispatch so it can be triggered manually,
  schedule:
     - cron: '2 * * * *'
     - cron: '0 5 2 9 *'
     - cron: '0 5 3 9 *'
     - cron: '0 5 16 9 *'
     - cron: '0 5 17 9 *'
     - cron: '0 5 1 10 *'
     - cron: '0 5 15 10 *'
     - cron: '0 5 29 10 *'
     - cron: '0 5 12 11 *'
     

jobs:
  dev-btms:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - name: Job1 Testing
        run: echo "Job1 first"
    #   - name: Intentionally fail Job 1
    #     run: exit 1    
        
  dev-btms-history:
    runs-on: ubuntu-latest
    steps:
      # - name: Job2 Testing
      #   run: echo "Job2 Second"
      - name: Intentionally fail Job 2
        run: exit 1

  dev-tms:
    needs: [dev-btms, dev-btms-history]
    if: always () 
    runs-on: ubuntu-latest
    steps:
      - name: Delay for 30 sec
        run: sleep 10
      - name: Job3 Testing
        run: echo "Job3 Third"

        
  # dev-tms:
  #   runs-on: ubuntu-latest
  #   needs: [dev-btms, dev-btms-history]
  #   if: ${{ needs.dev-btms.outputs.status != 'skip' && needs.dev-btms-history.outputs.status != 'skip' }}
  #   steps:
  #     - name: Delay for 30 sec
  #       run: sleep 60 # 900 seconds = 15 minutes
  #     - name: Job3 Testing
  #       run: echo "Job3 Third"
      #- name: Intentionally fail Job 3
        #run: exit 1    
        
  # dev-imaging:
  #   needs: [dev-btms, dev-btms-history]
  #   if: always()
  #   runs-on: ubuntu-latest
  #   steps:
  #     - name: checking
  #       id: schedule_validation
  #       run: echo "::set-output name=status::true"
  #     - name: sleep 10 sec  
  #       run: sleep 10 # 900 seconds = 15 minutes
  #     - name: Job4 Testing
  #       run: echo "Job4 Third" 
  #     - name: Intentionally fail Job 4
  #       run: exit 1    
        
        
  # qc-btms:
  #   needs: [Schedule_Validation]
  #   if: ${{ needs.Schedule_Validation.outputs.status }}== 'true'
  #   runs-on: ubuntu-latest
  #   needs: [dev-tms, dev-imaging]
  #   if: always() # always run even if a previous step fails
  #   steps:
  #     - name: Delay for 30 sec
  #       run: sleep 10 # 900 seconds = 15 minutes
  #     - name: Job5 Testing
  #       run: echo "Job5 Third"
  #     - name: Intentionally fail Job 4
  #       run: exit 1  
        
        
  # qb-btms-history:
  #   needs: [Schedule_Validation]
  #   if: ${{ needs.Schedule_Validation.outputs.status }}== 'true'
  #   runs-on: ubuntu-latest
  #   needs: [dev-tms, dev-imaging]
  #   if: always() # always run even if a previous step fails
  #   steps:
  #     - name: Delay for 30 sec
  #       run: sleep 10 # 900 seconds = 15 minutes
  #     - name: Job6 Testing
  #      run: echo "Job6 Third"
      #- name: Intentionally fail Job 4
        #run: exit 1  
